{"version":3,"file":"vamtiger.js","sources":["../source/types.ts","../source/install.ts","../source/project.ts","../source/vamtiger.ts"],"sourcesContent":["export enum Command {\n    project = 'project'\n}\n\nexport enum Project {\n    phpLaravel = 'php-laravel'\n}\n\nexport enum Result {\n    createdProject = 'Created Project',\n    ignored = 'Ignored'\n}\n\nexport enum Prefix {\n    vamtigerProject = 'vamtiger-project'\n}\n\nexport enum StringConstant {\n    dash = '-'\n}\n\nexport enum ProjectOptions {\n    type = 'type',\n    name = 'name'\n}\n\nexport enum Interface {\n    'api' = 'API',\n    'cli' = 'CLI'\n}\n\nexport interface IProject {\n    type: Project;\n    name: string;\n    project?: string;\n    destination?: string;\n    cli?: boolean;\n}\n\nexport interface IInstall {\n    project: string;\n}\n\nexport function ignore(params: any) {\n    return Result.ignored;\n}\n\nexport const errorMessage = {\n    noProjectTypeOptionSpecified: `No --${ProjectOptions.type} option specified (e.g. ${Prefix.vamtigerProject} ${Command.project} --${ProjectOptions.type} ${Project.phpLaravel} --${ProjectOptions.name} projec-name)`,\n    noProjectNameOptionSpecified: `No --${ProjectOptions.name} option specified (e.g. ${Prefix.vamtigerProject} ${Command.project} --${ProjectOptions.type} ${Project.phpLaravel} --${ProjectOptions.name} projec-name)`\n};","import NPM = require('npm');\nconst npm = require('npm') as typeof NPM;\nimport {\n    IInstall\n} from './types';\n\nconst loadParams = {\n    loglevel: 'silent',\n    progress: false\n};\n\nexport default function (params: IInstall) {return new Promise((resolve, reject) => {\n    const { project } = params;\n\n    npm.load(loadParams, (error, loadData) => {\n        if (error) {\n            reject(error);\n        } else {\n            npm.commands.install([project], (error, installData) => {\n                if (error) {\n                    reject(error);\n                } else {\n                    resolve({\n                        loadData,\n                        installData\n                    });\n                }\n            });\n        }\n    });\n})}","import {copy} from 'vamtiger-copy';\nimport {\n    IProject,\n    Project,\n    Prefix,\n    StringConstant,\n    Result,\n    ignore\n} from './types';\nimport install from './install';\n\nconst createProject = {\n    [Project.phpLaravel]: createPhpLaravelProject\n}\n\nexport default async function (params: IProject) {\n    const createCurrentProject = createProject[params.type] || ignore;\n    const project = [\n        Prefix.vamtigerProject,\n        params.type\n    ].join(StringConstant.dash);\n    const installParams = createCurrentProject && { project };\n\n    if (installParams) {\n        await install(installParams);\n    }\n\n    return createCurrentProject({...params, project});\n}\n\nasync function createPhpLaravelProject(params: IProject) {\n    const {\n        project,\n        destination = process.cwd(),\n        cli = false\n    } = params;\n    const { path: source } = project && require(project)\n        || { path: '' };\n    const copyParams = {\n        source,\n        destination\n    }\n\n    await copy(copyParams);\n\n    if (cli) {\n        console.log(Result.createdProject);\n    }\n\n    return Result.createdProject;\n}","import Args from 'vamtiger-argv/build/main';\nimport {\n    Command,\n    ProjectOptions,\n    Project,\n    ignore,\n    errorMessage\n} from './types';\nimport project from './project';\n\nconst args = new Args();\nconst { 2: commandArg } = args.raw;\nconst commands = {\n    [Command.project]: handleProject\n}\nconst command = commands[commandArg as Command] || ignore;\n\ncommand();\n\nfunction handleProject() {\n    const type = args.get(ProjectOptions.type) as Project || '';\n    const name = args.get(ProjectOptions.name) || '';\n    const projectParams = type && name && {\n        type,\n        name,\n        cli: true\n    }\n\n    if (!type) {\n        throw new Error(errorMessage.noProjectTypeOptionSpecified);\n    } else if (!name) {\n        throw new Error(errorMessage.noProjectNameOptionSpecified);\n    } else if (projectParams) {\n        return project(projectParams);\n    }\n}"],"names":["Command","Project","Result","Prefix","StringConstant","ProjectOptions","Interface","ignore","params","ignored","errorMessage","noProjectTypeOptionSpecified","type","vamtigerProject","project","phpLaravel","name","noProjectNameOptionSpecified","npm","require","loadParams","loglevel","progress","Promise","resolve","reject","load","error","loadData","commands","install","installData","createProject","[object Object]","createPhpLaravelProject","async","createCurrentProject","join","dash","installParams","destination","process","cwd","cli","path","source","copyParams","copy","console","log","createdProject","args","Args","2","commandArg","raw","handleProject","command","get","projectParams","Error"],"mappings":"qGAAYA,QAIAC,QAIAC,OAKAC,OAIAC,eAIAC,eAKAC,0GAiBZ,SAAgBC,OAAOC,GACnB,OAAON,OAAOO,SA5ClB,SAAYT,GACRA,oBADJ,CAAYA,UAAAA,aAIZ,SAAYC,GACRA,2BADJ,CAAYA,UAAAA,aAIZ,SAAYC,GACRA,mCACAA,oBAFJ,CAAYA,SAAAA,YAKZ,SAAYC,GACRA,qCADJ,CAAYA,SAAAA,YAIZ,SAAYC,GACRA,WADJ,CAAYA,iBAAAA,oBAIZ,SAAYC,GACRA,cACAA,cAFJ,CAAYA,iBAAAA,oBAKZ,SAAYC,GACRA,YACAA,YAFJ,CAAYA,YAAAA,eAqBZ,MAAaI,cACTC,qCAAsCN,eAAeO,+BAA+BT,OAAOU,mBAAmBb,QAAQc,aAAaT,eAAeO,QAAQX,QAAQc,gBAAgBV,eAAeW,oBACjMC,qCAAsCZ,eAAeW,+BAA+Bb,OAAOU,mBAAmBb,QAAQc,aAAaT,eAAeO,QAAQX,QAAQc,gBAAgBV,eAAeW,qBChD/LE,IAAMC,QAAQ,OAKdC,YACFC,SAAU,SACVC,UAAU,GAGd,iBAAyBd,GAAmB,OAAO,IAAIe,QAAQ,CAACC,EAASC,KACrE,MAAMX,QAAEA,GAAYN,EAEpBU,IAAIQ,KAAKN,WAAY,CAACO,EAAOC,KACrBD,EACAF,EAAOE,GAEPT,IAAIW,SAASC,SAAShB,GAAU,CAACa,EAAOI,KAChCJ,EACAF,EAAOE,GAEPH,GACII,SAAAA,EACAG,YAAAA,UCbxB,MAAMC,eACFC,CAAChC,QAAQc,YAAamB,yBAG1BC,uBAA+B3B,GAC3B,MAAM4B,EAAuBJ,cAAcxB,EAAOI,OAASL,OACrDO,GACFX,OAAOU,gBACPL,EAAOI,MACTyB,KAAKjC,eAAekC,MAChBC,EAAgBH,IAA0BtB,QAAAA,GAMhD,OAJIyB,SACMT,QAAQS,GAGXH,iCAAyB5B,IAAQM,QAAAA,KAG5CqB,eAAeD,wBAAwB1B,GACnC,MAAMM,QACFA,EAAO0B,YACPA,EAAcC,QAAQC,MAAKC,IAC3BA,GAAM,GACNnC,GACIoC,KAAMC,GAAW/B,GAAWK,QAAQL,KACnC8B,KAAM,IACTE,GACFD,OAAAA,EACAL,YAAAA,GASJ,aANMO,kBAAKD,GAEPH,GACAK,QAAQC,IAAI/C,OAAOgD,gBAGhBhD,OAAOgD,eCvClB,MAAMC,KAAO,IAAIC,MACTC,EAAGC,YAAeH,KAAKI,IACzB1B,UACFI,CAACjC,QAAQc,SAAU0C,eAEjBC,QAAU5B,SAASyB,aAA0B/C,OAInD,SAASiD,gBACL,MAAM5C,EAAOuC,KAAKO,IAAIrD,eAAeO,OAAoB,GACnDI,EAAOmC,KAAKO,IAAIrD,eAAeW,OAAS,GACxC2C,EAAgB/C,GAAQI,IAC1BJ,KAAAA,EACAI,KAAAA,EACA2B,KAAK,GAGT,IAAK/B,EACD,MAAM,IAAIgD,MAAMlD,aAAaC,8BAC1B,IAAKK,EACR,MAAM,IAAI4C,MAAMlD,aAAaO,8BAC1B,GAAI0C,EACP,OAAO7C,QAAQ6C,GAhBvBF"}